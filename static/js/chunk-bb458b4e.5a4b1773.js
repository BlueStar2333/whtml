(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb458b4e"],{1:function(e,t){},"11b1":function(e,t,n){},2:function(e,t){},3:function(e,t){},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({staticClass:"pagination-container-main",attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(e,t,n){var a=s(),o=e-a,i=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=i;var s=Math.easeInOutQuad(c,a,o,t);r(s),c<t?l(e):n&&"function"===typeof n&&n()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&i(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&i(0,800)}}},u=c,p=(n("5559"),n("2877")),d=Object(p["a"])(u,a,o,!1,null,"429e01bc",null);t["a"]=d.exports},"3ac1":function(e,t,n){},5559:function(e,t,n){"use strict";n("3ac1")},"7e9b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-form",{staticClass:"search",attrs:{"label-width":"100px",size:"small"}},[n("el-date-picker",{staticClass:"date-component",attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择起始日期"},model:{value:e.searchModel.startTime,callback:function(t){e.$set(e.searchModel,"startTime",t)},expression:"searchModel.startTime"}}),n("span",[e._v("-")]),n("el-date-picker",{staticClass:"date-component",attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择截止日期"},model:{value:e.searchModel.endTime,callback:function(t){e.$set(e.searchModel,"endTime",t)},expression:"searchModel.endTime"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.getData}},[e._v("查询")]),n("el-dropdown",{staticClass:"dropdown",on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.tableName||"请选择表单")),e.tableName?e._e():n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"自定义新冠感染调查情况表"}},[e._v("自定义新冠感染调查情况表")]),n("el-dropdown-item",{attrs:{command:"测试表2"}},[e._v("测试表2")]),n("el-dropdown-item",{attrs:{command:"表3"}},[e._v("表3")]),n("el-dropdown-item",{attrs:{command:"测试表（已关闭）",disabled:""}},[e._v("测试表（已关闭）")])],1)],1)],1),n("div",{staticStyle:{background:"#ceeaf3",height:"40px","line-height":"40px"}},[n("el-row",[n("el-col",{attrs:{span:23}}),n("el-col",{attrs:{span:1}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增",placement:"top"}},[n("i",{staticClass:"el-icon-plus add-icon",on:{click:e.handleAdd}})])],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":{"background-color":"#fefefe",color:"#959595"},border:"",data:e.tableData.slice((e.listQuery.page-1)*e.listQuery.limit,e.listQuery.page*e.listQuery.limit),fit:"","highlight-current-row":""},on:{"sort-change":e.sortChange}},[n("el-table-column",{attrs:{"min-width":"120px",fiexd:"",align:"center",prop:"name",label:"填报人"}}),n("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"填报时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createTime.split("T")[0])+" ")]}}])}),n("el-table-column",{attrs:{"min-width":"220px",align:"center",prop:"result.hasInfect",label:"是否有工作人员出现流感症状"}}),n("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"校验状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.result.hasInfect?n("span",{staticStyle:{color:"#E6A23C","font-weight":"600"}},[e._v(" 待校验 ")]):n("span",{staticStyle:{color:"#666"}},[e._v(" 0 ")])]}}])}),n("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"填写详情"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.result.hasInfect?n("svg-icon",{staticClass:"person-icon",attrs:{"icon-class":"person"},on:{click:function(n){return e.personDetails(t.row.result.person)}}}):n("span",[e._v("-")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-size":e.listQuery.limit,layout:"prev, pager, next, jumper",total:e.tableData.length},on:{"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{visible:e.drawer,title:"填写内容",width:"70%"},on:{"update:visible":function(t){e.drawer=t}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":{"background-color":"#fefefe",color:"#959595"},data:e.selectTable,border:""}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{align:"center",prop:"age",label:"年龄"}}),n("el-table-column",{attrs:{align:"telephone",prop:"telephone",width:"120",label:"电话"}}),n("el-table-column",{attrs:{align:"center",prop:"brandNumber",label:"胸牌号"}}),n("el-table-column",{attrs:{align:"center",prop:"nursingUnit",label:"护理单元"}}),n("el-table-column",{attrs:{align:"center",label:"感染人员职业",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["其他"===t.row.personnel?n("span",[e._v(e._s(t.row.personnelOccupation))]):"医生"===t.row.personnel||"护士"===t.row.personnel||"技师"===t.row.personnel?n("span",[e._v(" "+e._s(t.row.personnelPosition)+" - "+e._s(t.row.personnel)+" ")]):n("span",[e._v(e._s(t.row.personnel))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"症状"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.symptoms.join())+" "),t.row.symptoms.includes("其他")?n("span",[e._v("-"+e._s(t.row.otherSymptoms))]):e._e(),t.row.symptoms.includes("发热")?n("span",[e._v("--"+e._s(t.row.bodyTemperature)+"℃")]):e._e()])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"seeDoctor",label:"是否就诊"}}),n("el-table-column",{attrs:{align:"center",label:"疾病诊断结果",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["否"===t.row.seeDoctor?n("span",{staticStyle:{color:"#999"}},[e._v(" 未就诊 ")]):"其他"===t.row.illnessType?n("span",[e._v(" "+e._s(t.row.otherIllnessType)+" ")]):n("span",[e._v(" "+e._s("流行病感冒"===t.row.illnessType?"流行病感冒-"+t.row.influenzaType:t.row.illnessType)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center","min-width":"140px",label:"怀疑感染的来源为"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.source.includes("其他")?n("span",[e._v(" "+e._s(e.otherReplace(t.row.source,t.row.otherSource).toString())+" ")]):n("span",[e._v(" "+e._s(t.row.source.toString())+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",width:"220",label:"是如何确定自己感染了新冠病毒"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.howInfect.includes("其他")?n("span",[e._v(" "+e._s(e.otherReplace(t.row.howInfect,t.row.otherHowInfect).toString())+" ")]):n("span",[e._v(" "+e._s(t.row.howInfect.toString())+" ")])]}}])})],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"tableData",staticStyle:{width:"100%"},attrs:{hidden:"","header-cell-style":{"background-color":"#fefefe",color:"#959595"},data:e.tableData2,border:""}},[n("el-table-column",{attrs:{"min-width":"120px",fiexd:"",align:"center",prop:"name",label:"填报人"}}),n("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"填报时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.cTime.split("T")[0])+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.pName)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"年龄"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.age)+" ")])]}}])}),n("el-table-column",{attrs:{align:"telephone",label:"电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.telephone)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"胸牌号"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.brandNumber)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"护理单元"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.nursingUnit)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"感染人员职业"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",["其他"===t.row.personnel?n("span",[e._v(e._s(t.row.personnelOccupation))]):"医生"===t.row.personnel||"护士"===t.row.personnel||"技师"===t.row.personnel?n("span",[e._v(" "+e._s(t.row.personnelPosition)+" - "+e._s(t.row.personnel)+" ")]):n("span",[e._v(e._s(t.row.personnel))])])]}}])}),n("el-table-column",{attrs:{align:"center",label:"症状"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[n("span",[e._v(" "+e._s(t.row.symptoms.join())+" "),t.row.symptoms.includes("其他")?n("span",[e._v("-"+e._s(t.row.otherSymptoms))]):e._e(),t.row.symptoms.includes("发热")?n("span",[e._v("--"+e._s(t.row.bodyTemperature)+"℃")]):e._e()])])]}}])}),n("el-table-column",{attrs:{align:"center",label:"是否就诊"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.seeDoctor)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"疾病诊断结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",["否"===t.row.seeDoctor?n("span",{staticStyle:{color:"#999"}},[e._v(" 未就诊 ")]):"其他"===t.row.illnessType?n("span",[e._v(" "+e._s(t.row.otherIllnessType)+" ")]):n("span",[e._v(" "+e._s("流行病感冒"===t.row.illnessType?"流行病感冒-"+t.row.influenzaType:t.row.illnessType)+" ")])])]}}])}),n("el-table-column",{attrs:{align:"center","min-width":"140px",label:"怀疑感染的来源为"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[t.row.source?n("span",[t.row.source.includes("其他")?n("span",[e._v(" "+e._s(e.otherReplace(t.row.source,t.row.otherSource).toString())+" ")]):n("span",[e._v(" "+e._s(t.row.source.toString())+" ")])]):e._e()])]}}])}),n("el-table-column",{attrs:{align:"center","min-width":"140px",label:"是如何确定自己感染了新冠病毒"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[t.row.howInfect?n("span",[t.row.howInfect.includes("其他")?n("span",[e._v(" "+e._s(e.otherReplace(t.row.howInfect,t.row.otherHowInfect).toString())+" ")]):n("span",[e._v(" "+e._s(t.row.howInfect.toString())+" ")])]):e._e()])]}}])})],1)],1)},o=[],l=(n("b0c0"),n("d3b7"),n("159b"),n("d81d"),n("4e82"),n("ed08")),r=n("333d"),s=n("21a6"),i=n.n(s),c=n("1146"),u=n.n(c),p=n("b775");function d(e){return Object(p["a"])({url:"GetStaffContentTable",method:"post",data:e})}var m={name:"HealthEducation",components:{Pagination:r["a"]},data:function(){return{tableName:"",tableLoading:!1,tableData2:[],searchModel:{startTime:"",endTime:"",hospitalCode:this.$store.state.user.userInfo.hospitalCode},listLoading:!0,total:60,listQuery:{page:1,limit:10,sort:"+id"},tableData:[],drawer:!1,selectTable:[]}},created:function(){this.tableName=this.$route.query.name,this.getData()},methods:{handleCommand:function(e){this.tableName=e,this.tableLoading=!0;var t=this;this.$message("click on item "+e),setTimeout((function(){t.tableLoading=!1}),1e3)},handleAdd:function(){this.tableName?this.$message("跳转到填表"):this.$message("请先选择表单")},handleCurrentChange:function(e){this.listQuery.page=e},getData:function(){var e=this;this.tableData=[],d(this.searchModel).then((function(t){switch(e.$store.state.user.userInfo.Power){case 3:e.tableData=JSON.parse(t.d);break;default:JSON.parse(t.d).forEach((function(t){JSON.parse(t.result).person[0].administrativeOffice===e.$store.state.user.userInfo.Department&&e.tableData.push(t)}));break}e.tableData.forEach((function(e,t){e.result=JSON.parse(e.result)}));for(var n=[],a=0;a<e.tableData.length;a++)for(var o=0;o<e.tableData[a].result.person.length;o++)e.tableData[a].result.person[o].cTime=e.tableData[a].createTime,e.tableData[a].result.person[o].pName=e.tableData[a].name,n[n.length]=e.tableData[a].result.person[o];e.tableData2=n})),this.listLoading=!1},personDetails:function(e){this.selectTable=e,this.drawer=!0},otherReplace:function(e,t){var n=e;return n.pop(),n.push(t),n},handleDownload:function(){this.$nextTick((function(){var e=u.a.utils.table_to_book(document.querySelector(".tableData")),t=u.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{i.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"流感相关调查表.xlsx")}catch(n){}return t}))},formatJson:function(e){return this.tableData.map((function(t){return e.map((function(e){return"timestamp"===e?Object(l["d"])(t[e]):t[e]}))}))},sortChange:function(e){var t=e.prop,n=e.order;this.tableData.reverse(),"id"===t&&this.sortByID(n)},sortByID:function(e){this.listQuery.sort="ascending"===e?"+id":"-id",this.handleFilter()},handleFilter:function(){this.listQuery.page=1,this.getList()},getSortClass:function(e){var t=this.listQuery.sort;return t==="+".concat(e)?"ascending":"descending"}}},f=m,h=(n("c2e0"),n("2877")),b=Object(h["a"])(f,a,o,!1,null,"6c67827e",null);t["default"]=b.exports},c2e0:function(e,t,n){"use strict";n("11b1")}}]);